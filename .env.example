# Open ChatBot Platform - Environment Variables Template
# Copy this file to .env and fill in your actual values
# WARNING: Never commit the .env file to version control!

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Authorization Secret Key (CHANGE THIS IN PRODUCTION!)
# This key is shared between auth-server and chatbot service for JWT validation
# Must be at least 32 characters long
# Generate a secure key: openssl rand -hex 32
AUTH_SECRET_KEY=your-super-secret-key-at-least-32-characters-long-change-in-production

# OpenAI API Key (Required for AI chat functionality)
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Authorization Service URL (default: http://auth-server:8001)
# Use docker service name when running in docker-compose
AUTH_SERVICE_URL=http://auth-server:8001

# Application Ports
PORT=8000
AUTH_PORT=8001

# Server Host (default: 0.0.0.0 for Docker)
HOST=0.0.0.0

# Development Mode (set to true for auto-reload during development)
RELOAD=false

# JWT Token Expiration (in minutes, default: 30)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Auth Server Database (default: sqlite:///./auth.db)
DATABASE_URL=sqlite:///./auth.db

# ChatBot Database Path (default: ./data/conversations.db)
CHATBOT_DATABASE_PATH=./data/conversations.db

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Number of worker processes for production (default: 1)
# Set to number of CPU cores for production
WORKERS=1

# Log Level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# CORS Allowed Origins (comma-separated, default: *)
# Set specific origins for production: http://example.com,https://example.com
CORS_ORIGINS=*

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker Compose Project Name (optional)
COMPOSE_PROJECT_NAME=open-chatbot

# Docker Network Name (default: chatbot-network)
DOCKER_NETWORK=chatbot-network

# =============================================================================
# NGINX CONFIGURATION (for production profile)
# =============================================================================

# Enable production nginx (set to true for production deployment)
ENABLE_NGINX=false

# SSL Certificate Path (for HTTPS in production)
# SSL_CERT_PATH=./ssl/cert.pem
# SSL_KEY_PATH=./ssl/key.pem

# =============================================================================
# NOTES
# =============================================================================
#
# 1. Security Best Practices:
#    - Use a strong, unique AUTH_SECRET_KEY (min 32 characters)
#    - Never share or commit your OPENAI_API_KEY
#    - Use environment-specific .env files (dev, staging, prod)
#    - Restrict file permissions: chmod 600 .env
#
# 2. Getting Started:
#    - Copy this file: cp .env.example .env
#    - Update AUTH_SECRET_KEY and OPENAI_API_KEY
#    - Run: docker-compose up --build
#
# 3. Production Deployment:
#    - Change AUTH_SECRET_KEY to a cryptographically secure value
#    - Set RELOAD=false
#    - Configure CORS_ORIGINS to specific domains
#    - Set appropriate WORKERS count
#    - Enable HTTPS with SSL certificates
#    - Use environment variables or Docker secrets instead of .env file
#
# 4. Troubleshooting:
#    - Check logs: docker-compose logs -f
#    - Verify environment: docker-compose exec openai-chatbot env
#    - Test connectivity: curl http://localhost:8000/health
#
# =============================================================================
